doctype html
head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title MWF|Salestable
  link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css')
  link(rel='stylesheet' href='/css/stock.css')
.container.my-5.mt-6
  h3 Sales Records
  table.table.table-striped.table-bordered
    thead.table-dark
      tr
        th(scope='col') Customer Name
        th(scope='col') Product Type
        th(scope='col') Product Name
        th(scope='col') Quantity
        th(scope='col') Unit Price
        th(scope='col') Transport
        th(scope='col') Total Price 
        th(scope='col') Sales Agent 
        th(scope='col') Payment Method
        th(scope='col') Date
        if currentUser.role === "Manager"   
          th(scope='col') Update 
          th(scope='col') Delete 
        else 
          th(scope='col') Receipt 
    tbody
      if sales.length 
        each sale in sales 
          tr 
            td #{sale.customername }
            td #{sale.producttype }
            td #{sale.product }
            td #{sale.quantity }
            td #{sale.unitPrice }
            td #{sale.transportCheck}
            td #{(sale.totalPrice)}
            td #{sale.salesAgent.fullName}
            td #{(sale.paymentMethod)}
            td #{moment(sale.paymentdate).format("DD-MM-YYYY") }
            if currentUser.role === "Manager"   
              td 
                a.btn.btn-warning(href=`/editsale/${sale._id}`) Edit
              td 
                form(method='post' action="/deletesale")
                  input(type="hidden" name='id' value=sale._id)
                  button.btn.btn-danger.btn-block(type='sumbit') Delete
            else
              td 
                a.btn.btn-dark.mt-3(href=`/getReceipt/${sale._id}`) Generate  Receipt

.d-flex.justify-content-between.mt-3                               
  a.btn.btn-dark.mt-3(href='/Addsale') Add New Sale 
script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')
